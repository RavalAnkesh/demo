import { useRef, useState, useContext, createContext,useEffect } from "react";

/* Context for shared color */

const ColorContext = createContext();

function Login() {
  const userRef = useRef(null);
  const passRef = useRef(null);

  const color = useContext(ColorContext);

  const [error, setError] = useState("");

  useEffect(() => {
    userRef.current.focus();
  }, []);

  function handleLogin() {
    const username = userRef.current.value;
    const password = passRef.current.value;

    if (username === "" || password === "") {
      setError(" Username and Password are required");
      return;
    }

    if (username !== "admin" || password !== "123") {
      setError("Invalid username or password");
      return;
    }

    setError("");
    alert(" Login successful");

    userRef.current.style.color = color;
    passRef.current.style.color = color;
    
  }

  return (
    <>
      <h3>Login</h3>

      <input ref={userRef} placeholder="Username" />
      <br /><br />

      <input
        ref={passRef}
        type="password"
        placeholder="Password"
      />
      <br /><br />

      <button onClick={handleLogin}>Login</button>

      <br /><br />

      {/* Error Message */}
      {error && <p style={{color}}>{error}</p>}
    </>
  );
}

export default function App() {
  return (
    <ColorContext.Provider value="blue">
      <Login />
    </ColorContext.Provider>
  );
}
